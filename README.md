# Zorza
(/'zɔʐa/ ZAW-zha - Polish for *aurora*)  
An informational website for schools with an advanced timetable interface.
Designed to look nice on many screens, be fast, comfortable to use, and solid.
Supports teacher substitutions, group absences, occasional schedule changes.
Includes a page for public displays and a tree of downloadable files/rich text.

<p style="float: left">
<img src="https://user-images.githubusercontent.com/35867657/50116506-4a59b180-0242-11e9-8762-03b7207a20dc.png" height="390px">
<img src="https://user-images.githubusercontent.com/35867657/50116513-4e85cf00-0242-11e9-8049-800552640229.png" height="390px">
<img src="https://user-images.githubusercontent.com/35867657/50116521-52b1ec80-0242-11e9-99a8-c2e8de836226.png" height="390px">
</p>

## Setup
Install Django 2.0 or later and Python 3.4 or later.
For that, using Python virtual environments is recommended.

Now you can `git clone` the repository.
You will need to create a `zorza/localsettings.py` file and set `DEBUG`,
`SECRET_KEY`, `LANGUAGE_CODE`, `TIME_ZONE`.

The root (`/`) url is an alias for `/pages/home/`, which is a [Django flatpage](https://docs.djangoproject.com/en/2.0/ref/contrib/flatpages/). Create a flatpage with the URL `/home/` in Django administration (`/admin/`), otherwise you will get a 404. You have to create an account first with `./manage.py createsuperuser`.
In the footer there is a link to the flatpage with URL `/about/`.

Populating the timetable database should be done by scripts. The `zorza_scripts` repository is a collection of scripts for importing timetables generated by aSc TimeTables and tailoring the database for a specific usecase.

Very basic example timetable and flatpage data can be loaded by `./managepy loaddata fixtures/demo.json`.

For a production setup, consult
https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/
and
https://docs.djangoproject.com/en/2.0/howto/deployment/
.

The directories `mediafiles`, `staticfiles`, and favicons have to be served directly by the web server. Example nginx configuration for that:

```
	location /media  {
		alias /sites/zorza/mediafiles;
	}
	location /static {
		alias /sites/zorza/staticfiles;
	}
	location ~ ^/(android|apple-touch-icon|browserconfig|favicon|manifest|safari)(.*)\.(png|xml|ico|json|svg)$ {
		root /sites/zorza/staticfiles/favicons;
	}
```

This software is designed with response caching in mind because the content is mostly static and by nature not requiring urgent updates. Set `CACHE_MIDDLEWARE_SECONDS` in `localsettings.py` and configure your web server for response caching.

The page `/timetable/display/` displays remaining break/period time and teacher substitutions. It's intended to be run fullscreen in a browser on a public big screen.

## License and credits
This project is licensed under AGPLv3.

The header image is a modified photograph by [Simo "Ximonic" Räsänen](https://commons.wikimedia.org/wiki/File:Aurora_borealis_above_Lyngenfjorden,_2012_March.jpg) and is available under [CC BY-SA 3.0](https://creativecommons.org/licenses/by-sa/3.0/deed.en).

The logo font is [Raleway](https://github.com/impallari/Raleway/).

This project includes [medium-editor](https://github.com/yabwe/medium-editor/) by Davi Ferreira (http://www.daviferreira.com) licensed under the MIT license.

## Contributing
See CONTRIBUTING.md
